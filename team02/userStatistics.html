<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>User Statistics - Swedish Learning App</title>
    <link rel="stylesheet" href="../style.css?v=20251009">
    <link rel="stylesheet" href="styles/userStatistics.css?v=20251013">
    <script src="../scripts/save.js" defer></script>
    <script defer>
        document.addEventListener("DOMContentLoaded", () => {
            const TEAM_NAME = "team02";
            const LEVEL_COUNT = 3;
            let percentage = 0;

            for (let i = 1; i <= LEVEL_COUNT; i++) {
                if (window.save.get(TEAM_NAME, `level${i}Passed`) === 1) {
                    percentage += 100 / LEVEL_COUNT;
                }
            }

            window.save.stats.setCompletion(TEAM_NAME, Math.round(percentage))

            const stats = window.save.stats.get(TEAM_NAME);

            // Update the UI
            document.getElementById("wins-count").textContent = stats.wins ?? 0;
            document.getElementById("progress-bar").style.width = (stats.completion ?? 0) + "%";
            document.getElementById("progress-percent").textContent = (stats.completion ?? 0) + "%";
            document.getElementById("words-count").textContent = (window.save.get(TEAM_NAME, "learnedWords") ?? []).length;
        });
    </script>
</head>

<body>
    <main class="stats-frame">
        <section class="stats-card">
            <h1><i class="fas fa-chart-line"></i> User Statistics</h1>

            <div class="stat-item">
                <span><i class="fas fa-trophy"></i> Wins</span>
                <strong id="wins-count">0</strong>
            </div>

            <div class="stat-item">
                <span><i class="fas fa-book-open"></i> Words Learned</span>
                <strong id="words-count">0</strong>
            </div>

            <div class="stat-item progress-section">
                <span><i class="fas fa-tasks"></i> Game Progress</span>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <span id="progress-percent">0%</span>
            </div>

            <div class="button-container">
                <button class="menu-btn" onclick="window.location.href='index.html'">
                    <i class="fas fa-arrow-left"></i> Back to Menu
                </button>
            </div>

        </section>
    </main>
</body>

</html>